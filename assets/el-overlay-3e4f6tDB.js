import{c7 as y,e as I,b as D,u as S,C as N,a0 as $,l as E,d as x,z as U,a5 as V,$ as A,h as k,ay as j,f as F,aW as K,V as L,w as q,c8 as G,U as J,c9 as Q,W as Z,c as _}from"./index-Cq0hu8dX.js";import{P as h}from"./vnode-CC1GAhCu.js";import{t as R}from"./index-CEd7hGSD.js";import{a as ee}from"./focus-trap-CUETs5n5.js";const te=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},oe=D({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),ne={click:e=>e instanceof MouseEvent},se="overlay";var ae=I({name:"ElOverlay",props:oe,emits:ne,setup(e,{slots:o,emit:n}){const s=S(se),a=u=>{n("click",u)},{onClick:c,onMousedown:t,onMouseup:l}=te(e.customMaskEvent?void 0:a);return()=>e.mask?N("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:t,onMouseup:l},[E(o,"default")],h.STYLE|h.CLASS|h.PROPS,["onClick","onMouseup","onMousedown"]):$("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(o,"default")])}});const de=ae,re=(e,o,n,s)=>{let a={offsetX:0,offsetY:0};const c=i=>{const f=i.clientX,Y=i.clientY,{offsetX:v,offsetY:p}=a,d=e.value.getBoundingClientRect(),b=d.left,w=d.top,T=d.width,O=d.height,P=document.documentElement.clientWidth,z=document.documentElement.clientHeight,W=-b+v,X=-w+p,B=P-b-T+v,H=z-w-O+p,M=C=>{let r=v+C.clientX-f,m=p+C.clientY-Y;s!=null&&s.value||(r=Math.min(Math.max(r,W),B),m=Math.min(Math.max(m,X),H)),a={offsetX:r,offsetY:m},e.value&&(e.value.style.transform=`translate(${k(r)}, ${k(m)})`)},g=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",g)},t=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",c)},l=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",c)},u=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return U(()=>{V(()=>{n.value?t():l()})}),A(()=>{l()}),{resetPosition:u}},me=(e,o={})=>{j(e)||R("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||S("popup"),s=F(()=>n.bm("parent","hidden"));if(!K||L(document.body,s.value))return;let a=0,c=!1,t="0";const l=()=>{setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=t,Z(document.body,s.value))},200)};q(e,u=>{if(!u){l();return}c=!L(document.body,s.value),c&&(t=document.body.style.width,J(document.body,s.value)),a=ee(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,f=Q(document.body,"overflowY");a>0&&(i||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`)}),G(()=>l())},fe=e=>["",..._].includes(e);export{de as E,me as a,te as b,fe as i,re as u};
